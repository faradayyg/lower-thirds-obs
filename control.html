<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Control Panel - Lower Thirds</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>

    <link rel="stylesheet" href="css/lower.css" />
    <style>
      body {
        height: auto;
        overflow: auto;
        min-height: 100vh;
      }
      .control-container {
        max-height: none;
        flex-direction: column;
      }

      /* Advanced Settings Collapsible */
      .advanced-settings {
        margin-bottom: 20px;
      }

      .collapsible-toggle {
        width: 100%;
        padding: 12px 15px;
        background: #2a2a2a;
        color: #fff;
        border: 1px solid #444;
        border-radius: 4px;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: all 0.2s;
        font-family: inherit;
      }

      .collapsible-toggle:hover {
        background: #333;
        border-color: #cf4c4e;
      }

      .toggle-icon {
        transition: transform 0.3s;
        font-size: 12px;
      }

      .collapsible-toggle.active .toggle-icon {
        transform: rotate(180deg);
      }

      .collapsible-content {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease-out;
      }

      .collapsible-content.active {
        max-height: 2000px;
        transition: max-height 0.5s ease-in;
      }

      /* Connection Status */
      .connection-status {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 15px;
        border-radius: 6px;
        margin-bottom: 20px;
        font-size: 13px;
        font-weight: 600;
        border: 2px solid;
        position: relative;
      }

      .connection-status .refresh-btn {
        margin-left: auto;
        background: transparent;
        border: 1px solid currentColor;
        color: inherit;
        width: 28px;
        height: 28px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s;
        padding: 0;
        line-height: 1;
      }

      .connection-status .refresh-btn:hover:not(:disabled) {
        background: rgba(255, 255, 255, 0.1);
        transform: rotate(180deg);
      }

      .connection-status .refresh-btn:active:not(:disabled) {
        transform: rotate(180deg) scale(0.9);
      }

      .connection-status .refresh-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .connection-status .refresh-btn.rotating {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .connection-status .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        animation: pulse 2s ease-in-out infinite;
      }

      .connection-status.connecting {
        background: rgba(255, 193, 7, 0.1);
        border-color: rgba(255, 193, 7, 0.3);
        color: #ffc107;
      }

      .connection-status.connecting .status-dot {
        background: #ffc107;
      }

      .connection-status.connected {
        background: rgba(76, 175, 80, 0.1);
        border-color: rgba(76, 175, 80, 0.3);
        color: #4caf50;
      }

      .connection-status.connected .status-dot {
        background: #4caf50;
        animation: none;
      }

      .connection-status.disconnected {
        background: rgba(244, 67, 54, 0.1);
        border-color: rgba(244, 67, 54, 0.3);
        color: #f44336;
      }

      .connection-status.disconnected .status-dot {
        background: #f44336;
        animation: none;
      }

      .connection-status.error {
        background: rgba(244, 67, 54, 0.15);
        border-color: rgba(244, 67, 54, 0.4);
        color: #f44336;
      }

      .connection-status.error .status-dot {
        background: #f44336;
        animation: none;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.5;
          transform: scale(0.9);
        }
      }

      /* Responsive adjustments */
      @media (min-width: 1024px) {
        .control-container {
          flex-direction: row;
        }
      }

      @media (max-width: 768px) {
        .control-container {
          padding: 15px;
          gap: 20px;
        }

        #controlForm,
        .preview-section {
          max-width: 100%;
          padding: 20px;
        }

        #controlForm h3,
        .preview-section h3 {
          font-size: 16px;
        }

        .radio-group {
          gap: 10px !important;
        }

        .radio-label {
          padding: 6px 10px !important;
          font-size: 13px !important;
        }

        .preview-grid {
          grid-template-columns: repeat(
            auto-fit,
            minmax(150px, 1fr)
          ) !important;
          gap: 15px !important;
        }

        .preview-item {
          padding: 10px !important;
        }

        .button-group {
          flex-direction: column !important;
        }

        .button-group input[type="submit"],
        .button-group button {
          width: 100% !important;
        }
      }

      @media (max-width: 480px) {
        .control-container {
          padding: 10px;
        }

        #controlForm,
        .preview-section {
          padding: 15px;
        }

        .radio-group {
          flex-direction: column !important;
          gap: 8px !important;
        }

        .radio-label {
          width: 100%;
          justify-content: flex-start;
        }

        .color-radio {
          padding: 8px 12px !important;
        }

        .preview-grid {
          grid-template-columns: 1fr !important;
        }

        input[type="text"],
        input[type="number"] {
          font-size: 16px !important;
        }
      }
    </style>
  </head>
  <body>
    <div class="control-container">
      <form id="controlForm" onsubmit="updateLowerThird(event)">
        <h3>Lower Third Control Panel</h3>

        <!-- Connection Status Indicator -->
        <div id="connectionStatus" class="connection-status connecting">
          <span class="status-dot"></span>
          <span class="status-text">Initializing...</span>
          <button type="button" class="refresh-btn" onclick="reconnectToDisplay()" title="Reconnect to display">
            ↻
          </button>
        </div>

        <div class="form-group">
          <label for="line1">Line 1:</label>
          <input
            type="text"
            id="line1"
            name="line1"
            placeholder="First Line Text"
          />
        </div>

        <div class="form-group">
          <label for="line2">Line 2:</label>
          <input
            type="text"
            id="line2"
            name="line2"
            placeholder="Second Line Text"
          />
        </div>

        <!-- Advanced Settings Collapsible -->
        <div class="advanced-settings">
          <button
            type="button"
            class="collapsible-toggle"
            onclick="toggleAdvanced()"
          >
            <span>Advanced Settings</span>
            <span class="toggle-icon">▼</span>
          </button>
          <div class="collapsible-content">
            <div class="form-group color-group">
              <label>Text Color:</label>
              <div class="radio-group">
                <label class="radio-label color-radio">
                  <input type="radio" name="color1" value="ffffff" checked />
                  <span
                    class="color-swatch"
                    style="background-color: #ffffff"
                  ></span>
                  <span>White</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color1" value="000000" />
                  <span
                    class="color-swatch"
                    style="background-color: #000000"
                  ></span>
                  <span>Black</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color1" value="cccccc" />
                  <span
                    class="color-swatch"
                    style="background-color: #cccccc"
                  ></span>
                  <span>Gray</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color1" value="ffff00" />
                  <span
                    class="color-swatch"
                    style="background-color: #ffff00"
                  ></span>
                  <span>Yellow</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color1" value="00ffff" />
                  <span
                    class="color-swatch"
                    style="background-color: #00ffff"
                  ></span>
                  <span>Cyan</span>
                </label>
              </div>
            </div>

            <div class="form-group color-group">
              <label>Accent Color:</label>
              <div class="radio-group">
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="cf4c4e" checked />
                  <span
                    class="color-swatch"
                    style="background-color: #cf4c4e"
                  ></span>
                  <span>Red</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="3498db" />
                  <span
                    class="color-swatch"
                    style="background-color: #3498db"
                  ></span>
                  <span>Blue</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="2ecc71" />
                  <span
                    class="color-swatch"
                    style="background-color: #2ecc71"
                  ></span>
                  <span>Green</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="e67e22" />
                  <span
                    class="color-swatch"
                    style="background-color: #e67e22"
                  ></span>
                  <span>Orange</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="9b59b6" />
                  <span
                    class="color-swatch"
                    style="background-color: #9b59b6"
                  ></span>
                  <span>Purple</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="f1c40f" />
                  <span
                    class="color-swatch"
                    style="background-color: #f1c40f"
                  ></span>
                  <span>Yellow</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="1abc9c" />
                  <span
                    class="color-swatch"
                    style="background-color: #1abc9c"
                  ></span>
                  <span>Teal</span>
                </label>
                <label class="radio-label color-radio">
                  <input type="radio" name="color2" value="e91e63" />
                  <span
                    class="color-swatch"
                    style="background-color: #e91e63"
                  ></span>
                  <span>Pink</span>
                </label>
              </div>
            </div>

            <div class="form-group">
              <label for="duration">Duration (seconds):</label>
              <input
                type="number"
                id="duration"
                name="duration"
                min="1"
                max="60"
                step="0.5"
                value="10"
              />
            </div>

            <div class="form-group animation-group">
              <label>Animation Style:</label>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="animation" value="1" checked />
                  <span>Style 1</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="animation" value="2" />
                  <span>Style 2</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="animation" value="3" />
                  <span>Style 3</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="animation" value="4" />
                  <span>Style 4</span>
                </label>
                <label class="radio-label">
                  <input type="radio" name="animation" value="5" />
                  <span>Style 5</span>
                </label>
              </div>
            </div>
          </div>
          <!-- end collapsible-content -->
        </div>
        <!-- end advanced-settings -->

        <div class="button-group">
          <input type="submit" value="Update Lower Third" />
          <button type="button" onclick="hideLowerThird()">Hide</button>
        </div>
      </form>

      <div class="preview-section">
        <h3>Animation Previews</h3>
        <div class="preview-grid">
          <div class="preview-item">
            <img src="/img/1.gif" alt="Style 1 Preview" />
            <p>Style 1</p>
          </div>
          <div class="preview-item">
            <img src="/img/2.gif" alt="Style 2 Preview" />
            <p>Style 2</p>
          </div>
          <div class="preview-item">
            <img src="/img/3.gif" alt="Style 3 Preview" />
            <p>Style 3</p>
          </div>
          <div class="preview-item">
            <img src="/img/4.gif" alt="Style 4 Preview" />
            <p>Style 4</p>
          </div>
          <div class="preview-item">
            <img src="/img/5.gif" alt="Style 5 Preview" />
            <p>Style 5</p>
          </div>
        </div>
      </div>
    </div>

    <div id="success" style="display: none">✅ Text Updated!</div>

    <script>
      function toggleAdvanced() {
        const toggle = document.querySelector(".collapsible-toggle");
        const content = document.querySelector(".collapsible-content");

        toggle.classList.toggle("active");
        content.classList.toggle("active");
      }
    </script>
    <script src="js/control.js"></script>
  </body>
</html>
